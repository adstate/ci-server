# test task

версия nodejs v10.14.1

сервер лежит в папке server/src

запуск из директории server:
    "start": "node ./src/server.js",
    "dev": "nodemon ./src/server.js"

при запуске ожидается переменная окружения process.env.JWT_TOKEN

Для простоты положил собранное клиентское приложение сразу в директорию сервера.
Нужно сделать npm install в директории server. И запустить сервер. localhost:9000

Для запуска unit-тестов для сервера:
server> npm run test

Для запуска unit-тестов клиента:
client> npm run test

Для запуска интешрационных тестов в основной директории выполнить:
ci-server> npm install
ci-server> npm run test

## какие сценарии вы проверяете интеграционными тестами
Интеграционными тестами проверяется общее взаимодейвие компонентов приложения в среде близкой к промышленной.
Проверяется сохранение настроек, добавление билда в очередь, создание билда по хэшу коммита.

В принципе, как и говорилось на лекции, интеграционные тесты нестабильны, особенно с учетом того, что у нас используется обращение к https://hw.shri.yandex/api, которое периодически возвращает ошибки. По идее нужно иметь локальный разворот этого апи.
Так как приложение ci-server уже на старте сильно зависит от внешнего апи при получении настроек, то использование обращений к внешнему апи в интеграционных тестах становится критичным и подрывает их достоверность и возможность опираться на их результаты в оценке корректости работы самого приложения.

P.s. По-моему, все же хук Before был бы непложим местом для подготовки бд перед тестами. 

## из каких логических блоков состоит ваше приложение и какие их сценарии вы проверяете модульными тестами
Серверная часть приложения состоит из следующих блоков:
- контролеры;
- утилита работы с гитом;
- кэш.

Клиентаская часть состоит из следующих блоков:
- компоненты;
- слой redux, actions, reducers.

В серверной части юнит-тестами покрыты контролеры и работа с гитом.
В клиентской тестируется рендер компонентов.

P.s. Остальное не покрыто исключительно из-за ограничения времени и нестабильности интеграционных тестов.


// оставляю описание, чтобы не потерять
Взята за основу слудеющая логика:
    - при первоначальном сохранении настроек берется последний коммит из указанной ветки и отправлятся на сборку;
    - при изменении репозитория в настроках - происходит удаление старых настроек и очистка списка билдов;
    - при изменении ветки в настройках в рамках того же репозитория берется последний коммит новой ветки и отправляется на сборку;

